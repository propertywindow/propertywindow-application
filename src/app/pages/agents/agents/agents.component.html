<div id="content_wrapper" class="fullWidth1-wrapper">
    <div class="content">
        <header class="header-wrapper header-sm">
            <h1 *ngIf="service"><i class="{{service.icon}}"></i> {{service.description}}</h1>
        </header>
        <div class="content-body">
            <div class="card card-datatable">
                <header class="card-header p-30">
                    <div class="selected-toolbar" [ngClass]="{'active' : isToolbarActive}">
                        <md-toolbar class="activeHeaderColor">
                            <span>{{itemCount}} {{itemsSelected}}</span>
                            <span class="demo-fill-remaining"></span>
                            <button md-icon-button>
                                <md-icon class="md-24">delete</md-icon>
                            </button>
                        </md-toolbar>
                    </div>
                    <h2 class="card-title" *ngIf="service">{{service.description}}</h2>
                    <ul class="actions icons top-right">
                        <li>
                            <a href="javascript:void(0)" #tooltip="mdTooltip" [mdTooltip]="'Search Entries'"
                               [mdTooltipPosition]="'above'" [mdTooltipDisabled]="'false'"
                               [mdTooltipShowDelay]="0" [mdTooltipHideDelay]="100"
                               [mdTooltipClass]="{'red-tooltip': 'false'}" (click)="isSearchActive = !isSearchActive;">
                                <i class="zmdi zmdi-search"></i>
                            </a>
                        </li>
                        <li class="dropdown" dropdown>
                            <a href="javascript:void(0)" #tooltip="mdTooltip" [mdTooltip]="'Show Entries'"
                               [mdTooltipPosition]="'above'" [mdTooltipDisabled]="'false'"
                               [mdTooltipShowDelay]="0" [mdTooltipHideDelay]="200"
                               [mdTooltipClass]="{'red-tooltip': 'false'}" dropdownToggle>
                                <i class="zmdi zmdi-more-vert"></i>
                            </a>
                            <ul class="dropdown-menu btn-primary dropdown-menu-right">
                                <li *ngFor="let choice of pageLengths">
                                    <a class="dropdown-item" href="#" (click)="selectPageLength(choice)"
                                       [ngClass]="{'page-amount-selected': choice === table.limit}">{{choice}}</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="javascript:void(0)" #tooltip="mdTooltip" [mdTooltip]="'Export All'"
                               [mdTooltipPosition]="'above'" [mdTooltipDisabled]="'false'"
                               [mdTooltipShowDelay]="0" [mdTooltipHideDelay]="200"
                               [mdTooltipClass]="{'red-tooltip': 'false'}">
                                <i class="zmdi zmdi-inbox"></i>
                            </a>
                        </li>
                    </ul>
                    <ul class="actions fab bottom-right">
                        <li>
                            <button class="btn btn-accent btn-fab animate-fab"
                                    [ngClass]="{'animated infinite tada' : !loading && rows.length === 0}"
                                    md-ripple>
                                <i class="zmdi zmdi-plus"></i>
                            </button>

                        </li>
                    </ul>
                </header>
                <div class="card-block p-0">
                    <div class="data-filter-wrapper" [ngClass]="{'active' : isSearchActive}">
                        <i class="zmdi zmdi-search search filter-icons"></i>
                        <input type='text' class='data-filter' placeholder='Search property...'
                               (keyup)='updateFilter($event)' [(ngModel)]="searchValue"/>
                        <a href="javascript:void(0)" class="close filter-icons" (click)="triggerClose($event)"><i
                                class="zmdi zmdi-close"></i></a>
                    </div>
                    <ngx-datatable #table style="width: 100%" class="material" [rows]="rows"
                                   [groupExpansionDefault]="true"
                                   [columnMode]="'force'"
                                   [headerHeight]="50" [footerHeight]="50" [rowHeight]="'auto'" [limit]="10"
                                   [selected]="selected" [selectionType]="'checkbox'" (activate)="onActivate($event)"
                                   (select)='onSelect($event)'>

                        <ngx-datatable-group-header [rowHeight]="50" #myGroupHeader (toggle)="onDetailToggle($event)">
                            <ng-template let-group="group" let-expanded="expanded" ngx-datatable-group-header-template>
                                <div class="datatable-group-header">
                                    <a
                                            href="#"
                                            [class.datatable-icon-right]="!expanded"
                                            [class.datatable-icon-down]="expanded"
                                            title="Expand/Collapse Group"
                                            (click)="toggleExpandGroup(group)">
                                        <b>{{group.value[0].name}}</b>
                                    </a>
                                </div>
                            </ng-template>
                        </ngx-datatable-group-header>

                        <ngx-datatable-column [width]="60" [sortable]="false" [canAutoResize]="false"
                                              [draggable]="false" [resizeable]="false">
                            <ng-template ngx-datatable-header-template let-value="value"
                                         let-allRowsSelected="allRowsSelected" let-selectFn="selectFn">
                                <md-checkbox class="example-margin" [checked]="allRowsSelected"
                                             (change)="selectFn(!allRowsSelected)"></md-checkbox>
                            </ng-template>
                            <ng-template ngx-datatable-cell-template let-value="value" let-isSelected="isSelected"
                                         let-onCheckboxChangeFn="onCheckboxChangeFn" let-group="group">
                                <md-checkbox class="example-margin" [checked]="isSelected"
                                             (change)="onCheckboxChangeFn($event)"></md-checkbox>
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Office"></ngx-datatable-column>
                        <ngx-datatable-column name="Address"></ngx-datatable-column>
                        <ngx-datatable-column name="City"></ngx-datatable-column>
                        <ngx-datatable-column name="Property Limit">
                            <ng-template let-row="row" ngx-datatable-cell-template>
                                {{row.property_limit}}
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column name="Actions">
                            <ng-template let-row="row" ngx-datatable-cell-template>
                                <a href="javascript:void(0)" (click)="impersonate(row.agent_user_id)" class="icon">
                                    <i class="mdi mdi-transit-transfer"></i>
                                </a>
                                <a href="javascript:void(0)" attr.data-id="{{row.id}}"
                                   [routerLink]="['/agents/view', row.id]" class="icon">
                                    <i class="zmdi zmdi-edit"></i>
                                </a>
                            </ng-template>
                        </ngx-datatable-column>
                    </ngx-datatable>
                </div>
            </div>
        </div>
    </div>

</div>
<footer id="footer_wrapper" class="footer_wrapper"></footer>
